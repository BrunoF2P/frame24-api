spring.application.name=${APP_NAME:Frame 24}

# PostgreSQL
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/frame24}
spring.datasource.username=${DATABASE_USERNAME:frame24}
spring.datasource.password=${DATABASE_PASSWORD:frame24pass}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:none}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.type.prefer_native_enum_types=true

# Flyway
spring.flyway.enabled=${FLYWAY_ENABLED:true}
spring.flyway.url=${FLYWAY_URL:jdbc:postgresql://localhost:5432/frame24}
spring.flyway.user=${FLYWAY_USER:frame24}
spring.flyway.password=${FLYWAY_PASSWORD:frame24pass}

# RabbitMQ
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:frame24}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:frame24pass}
spring.rabbitmq.virtual-host=${RABBITMQ_VHOST:/}

# MailHog / SMTP
spring.mail.host=${MAIL_HOST:localhost}
spring.mail.port=${MAIL_PORT:1025}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.protocol=${MAIL_PROTOCOL:smtp}

# AWS / MinIO Credentials
spring.cloud.aws.credentials.access-key=${AWS_ACCESS_KEY:frame24}
spring.cloud.aws.credentials.secret-key=${AWS_SECRET_KEY:frame24pass}
spring.cloud.aws.region.static=${AWS_REGION:us-east-1}

# Actuator
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info,caches}
management.endpoint.health.show-details=${ACTUATOR_HEALTH_DETAILS:always}
management.health.db.enabled=${ACTUATOR_HEALTH_DB:true}
management.health.diskspace.enabled=${ACTUATOR_HEALTH_DISK:true}
management.health.rabbit.enabled=${ACTUATOR_HEALTH_RABBIT:true}

# Profile
spring.profiles.active=${SPRING_PROFILE:dev}

# ============================================================================
# Redis Cache Configuration
# ============================================================================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2

# Server Configuration
server.port=${PORT:8080}

# ============================================================================
# API Versioning (Spring Boot 4)
# ============================================================================
# Default version if not specified
spring.mvc.apiversion.default=v1.0

# Enable header-based versioning
spring.mvc.apiversion.use.header=api-version

# Path-segment versioning disabled to avoid conflicts with /scalar, /swagger-ui, etc
# Use header-based versioning instead: api-version: v1.0
# spring.mvc.apiversion.use.path-segment=0

# Cache Configuration
spring.cache.type=redis
spring.cache.redis.time-to-live=10m
spring.cache.redis.cache-null-values=false
spring.cache.redis.use-key-prefix=true
spring.cache.redis.key-prefix=frame24:

# JWT Configuration
# Secret key MUST be Base64 encoded, minimum 256 bits (32 bytes) for HS256
# Generate new key: openssl rand -base64 32
jwt.secret=${JWT_SECRET:}

# Access token expiration: 1 hora (3600000 ms)
jwt.access-token-expiration=${JWT_ACCESS_TOKEN_EXPIRATION:3600000}

# Refresh token expiration: 7 dias (604800000 ms)
jwt.refresh-token-expiration=${JWT_REFRESH_TOKEN_EXPIRATION:604800000}

# ============================================================================
# Scheduling Configuration
# ============================================================================
spring.task.scheduling.pool.size=2

# ============================================================================
# Snowflake ID Generator Configuration
# ============================================================================
# Worker ID (0-31) - Identifica a instância da aplicação
snowflake.worker-id=${SNOWFLAKE_WORKER_ID:1}

# Datacenter ID (0-31) - Identifica o datacenter/região
snowflake.datacenter-id=${SNOWFLAKE_DATACENTER_ID:1}

# ============================================================================
# Email Configuration
# ============================================================================
app.email.from=${EMAIL_FROM:noreply@frame24.com}
app.email.from-name=${EMAIL_FROM_NAME:Frame 24 Cinema}
# ============================================================================
# Security Configuration
# ============================================================================
# Maximum failed login attempts before account lock
security.max-failed-login-attempts=${MAX_FAILED_LOGIN_ATTEMPTS:5}
# Account lock duration in minutes
security.account-lock-duration-minutes=${ACCOUNT_LOCK_DURATION:15}
# Number of old passwords to keep in history (prevents reuse)
security.password-history-size=${PASSWORD_HISTORY_SIZE:3}
# ============================================================================
# Springdoc OpenAPI / Scalar Configuration
# ============================================================================
# Scalar UI path (modern alternative to Swagger UI)
springdoc.scalar.path=/scalar
# Swagger UI path (classic OpenAPI interface)
springdoc.swagger-ui.path=/swagger-ui
# OpenAPI endpoint
springdoc.api-docs.path=/v3/api-docs
# Enable Scalar UI
springdoc.scalar.enabled=true
# Enable Swagger UI
springdoc.swagger-ui.enabled=true
# Show actuator endpoints in documentation
springdoc.show-actuator=true
# Group API by tags
springdoc.swagger-ui.tags-sorter=alpha
# Display request duration
springdoc.swagger-ui.display-request-duration=true
# Enable try-it-out by default
springdoc.swagger-ui.try-it-out-enabled=true